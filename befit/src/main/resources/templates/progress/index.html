<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Progress Charts</title>

    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-light">

<nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4">
    <div class="container">
        <a class="navbar-brand" href="/">Befit</a>

        <div class="navbar-nav">
            <a class="nav-link" href="/dashboard">Dashboard</a>
            <a class="nav-link" href="/sessions">Sessions</a>
            <a class="nav-link" href="/exercise-types">Exercise Types</a>
            <a class="nav-link" href="/stats">Statistics</a>
            <a class="nav-link active" href="/progress">Progress</a>
            <a class="nav-link" href="/logout">Logout</a>
        </div>
    </div>
</nav>

<div class="container">

    <h2 class="mb-4">Training Progress</h2>

    <!-- Sessions vs Reps -->
    <div class="card mb-4 p-3">
        <h4>Total Reps Over Time</h4>
        <canvas id="repsChart"></canvas>
    </div>

    <!-- Sessions vs Weight -->
    <div class="card mb-4 p-3">
        <h4>Total Weight Lifted Over Time</h4>
        <canvas id="weightChart"></canvas>
    </div>

</div>

<script th:inline="javascript">
    const dates = /*[[${dates}]]*/ [];
    const reps = /*[[${repsData}]]*/ [];
    const weights = /*[[${weightData}]]*/ [];

    // REPS CHART
    new Chart(document.getElementById("repsChart"), {
        type: "line",
        data: {
            labels: dates,
            datasets: [{
                label: "Total Reps",
                data: reps,
                borderWidth: 3,
                tension: 0.3
            }]
        }
    });

    // WEIGHT CHART
    new Chart(document.getElementById("weightChart"), {
        type: "line",
        data: {
            labels: dates,
            datasets: [{
                label: "Total Weight (kg)",
                data: weights,
                borderWidth: 3,
                tension: 0.3
            }]
        }
    });
</script>

</body>
</html>
